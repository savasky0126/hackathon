<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ëµ∑Â∫ä„Çø„Ç§„Éû„Éº UI</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans JP', sans-serif;
      background: linear-gradient(135deg, #7b2ff7, #00c6ff);
      display: flex;
      height: 100vh;
      overflow: hidden;
      color: #222;
    }

    /* „Çµ„Ç§„Éâ„Éê„Éº */
    .sidebar {
      width: 200px;
      background: #fff;
      display: flex;
      flex-direction: column;
      padding: 20px;
      box-sizing: border-box;
    }
    .sidebar h1 {
      font-size: 14px;
      margin-bottom: 30px;
    }
    .menu {
      flex: 1;
    }
    .menu-item {
      margin: 14px 0;
      font-size: 14px;
      color: #888;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .menu-item img {
      width: 18px;
      height: 18px;
      object-fit: contain;
    }
    .menu-item.active {
      color: #2563eb;
      font-weight: 600;
    }
    .logout {
      margin-top: auto;
      font-size: 13px;
      color: #666;
      cursor: pointer;
    }

    /* „É°„Ç§„É≥„Ç´„Éº„Éâ */
    .main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .card {
      background: #f5f5f7;
      border-radius: 28px;
      width: 100%;
      max-width: 960px;
      height: 90%;
      display: flex;
      overflow: hidden;
    }

    /* Â∑¶ÂÅ¥„Ç≥„É≥„Éà„É≠„Éº„É´ */
    .controls {
      flex: 2;
      padding: 30px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .upload-time {
      display: flex;
      gap: 20px;
    }
    .upload-box, .time-box {
      flex: 1;
      background: #fff;
      border-radius: 14px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    .upload-box input { display: none; }
    .upload-box label {
      cursor: pointer;
      color: #666;
      font-size: 14px;
    }
    .upload-box img {
      max-width: 100%;
      max-height: 120px;
      object-fit: cover;
      display: none;
      border-radius: 8px;
    }
    .time-box .time {
      font-size: 28px;
      font-weight: bold;
    }

    /* „Çø„Ç§„Éû„ÉºÂÖ•Âäõ */
    .time-input {
      margin-top: 10px;
    }
    .time-input input {
      appearance: none;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 6px 10px;
      font-size: 16px;
    }
    .status {
      margin-top: 8px;
      font-size: 13px;
      color: #555;
    }

    /* „Çπ„Çø„Éº„Éà„Éú„Çø„É≥ */
    .start-btn {
      margin-top: auto;
      padding: 14px;
      border: none;
      border-radius: 20px;
      background: linear-gradient(90deg, #2563eb, #06b6d4);
      color: #fff;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
    }

    /* Âè≥ÂÅ¥„É¶„Éº„Ç∂„Éº„É™„Çπ„Éà */
    .users {
      flex: 1;
      background: #eceef1;
      border-left: 1px solid #ddd;
      padding: 20px;
      overflow-y: auto;
    }
    .user {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 14px;
    }
    .user img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #bbb;
    }
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #22c55e;
    }
    .user-info {
      font-size: 13px;
    }
    .user-info .name { font-weight: 600; }
    .user-info .id { color: #777; font-size: 12px; }
  </style>
</head>
<body>
  <aside class="sidebar">
    <h1>„Åì„ÅÆ„Éá„Éê„Ç§„Çπ„ÅÆ<br>„Ç¥„Å®„ÅãÂêçÂâç</h1>
    <nav class="menu">
      <div class="menu-item active"><img src="dashboard.png" alt="dashboard">Dashboard</div>
      <div class="menu-item"><img src="vital.png" alt="vital">Vital</div>
      <div class="menu-item"><img src="chat.png" alt="chat">Chat</div>
      <div class="menu-item"><img src="setting.png" alt="setting">Setting</div>
    </nav>
    <div class="logout">‚á¶ log out</div>
  </aside>

  <main class="main">
    <div class="card">
      <section class="controls">
        <div class="upload-time">
          <!-- ÁîªÂÉè„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ -->
          <div class="upload-box">
            <input id="fileInput" type="file" accept="image/*">
            <label for="fileInput">üì∑ ÂÜôÁúü„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</label>
            <img id="preview" alt="„Éó„É¨„Éì„É•„ÉºÁîªÂÉè" />
          </div>

          <!-- „Çø„Ç§„Éû„Éº -->
          <div class="time-box">
            <div>Good Morning time</div>
            <div class="time">‚è∞</div>
            <div class="time-input">
              <input id="wakeTime" type="time">
            </div>
            <div class="status" id="status">„Åæ„Å†„Çø„Ç§„Éû„Éº„ÅØ„Çª„ÉÉ„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ</div>
          </div>
        </div>

        <button id="startBtn" class="start-btn">START</button>
      </section>

      <!-- „É¶„Éº„Ç∂„Éº„É™„Çπ„Éà -->
      <aside class="users">
        <h3>Online User</h3>
        <div class="user">
          <img>
          <div class="status-dot"></div>
          <div class="user-info">
            <div class="name">Â§©ÈáéÂä±Èü≥</div>
            <div class="id">@amano reo</div>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <script>
    // --- „Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÂá¶ÁêÜ ---
    const fileInput = document.getElementById('fileInput');
    const preview = document.getElementById('preview');

    fileInput.addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return;
      if (!file.type.startsWith('image/')) {
        alert('ÁîªÂÉè„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
        return;
      }
      const url = URL.createObjectURL(file);
      preview.src = url;
      preview.style.display = 'block';
    });

    // --- „Çø„Ç§„Éû„ÉºÂá¶ÁêÜ ---
    const wakeTimeInput = document.getElementById('wakeTime');
    const startBtn = document.getElementById('startBtn');
    const status = document.getElementById('status');
    let alarmTimeout = null;

    function formatTimeHM(d){
      const h = String(d.getHours()).padStart(2,'0');
      const m = String(d.getMinutes()).padStart(2,'0');
      return `${h}:${m}`;
    }

    wakeTimeInput.addEventListener('input', ()=>{ status.textContent='„Åæ„Å†„Çπ„Çø„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ' });

    startBtn.addEventListener('click', ()=>{
      const timeValue = wakeTimeInput.value;
      if(!timeValue){ alert('Ëµ∑„Åç„ÇãÊôÇÈñì„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ'); return; }

      const [hh, mm] = timeValue.split(':').map(x=>parseInt(x,10));
      const now = new Date();
      const target = new Date(now);
      target.setHours(hh, mm, 0, 0);
      if(target <= now){
        target.setDate(target.getDate()+1);
      }
      const diff = target - now;

      if(alarmTimeout) clearTimeout(alarmTimeout);
      alarmTimeout = setTimeout(()=>{
        try{
          const ctx = new (window.AudioContext || window.webkitAudioContext)();
          const o = ctx.createOscillator();
          const g = ctx.createGain();
          o.type = 'sine'; o.frequency.value = 880;
          g.gain.value = 0.0025;
          o.connect(g); g.connect(ctx.destination);
          o.start();
          setTimeout(()=>{o.stop(); ctx.close();},1500);
        }catch(e){}
        alert('Ë®≠ÂÆö„Åó„ÅüÊôÇÈñì„Å´„Å™„Çä„Åæ„Åó„ÅüÔºÅ');
        status.textContent = '„Ç¢„É©„Éº„É†„ÅåÈ≥¥„Çä„Åæ„Åó„Åü„ÄÇ';
        alarmTimeout = null;
      }, diff);

      status.textContent = `„Ç¢„É©„Éº„É†„Çª„ÉÉ„ÉàÊ∏à ‚Äî ${formatTimeHM(target)} „Å´È≥¥„Çä„Åæ„ÅôÔºà${Math.round(diff/60000)}ÂàÜÂæåÔºâ`;
    });

    // „Éö„Éº„Ç∏Èõ¢ËÑ±ÊôÇ„Å´Ë≠¶Âëä
    window.addEventListener('beforeunload', e => {
      if(alarmTimeout){ e.preventDefault(); e.returnValue = ''; }
    });

    // ÁèæÂú®ÊôÇÂàª„ÅÆ„É™„Ç¢„É´„Çø„Ç§„É†Ë°®Á§∫
    const timeDisplay = document.querySelector('.time-box .time');
    setInterval(()=>{
      const now = new Date();
      timeDisplay.textContent = formatTimeHM(now);
    }, 1000);
  </script>
</body>
</html>